{% extends "base.html" %}
{% block css %}
	<!-- DataTables -->
	<link href="static/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
	<link href="static/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="static/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="static/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="static/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css" />
{% endblock %}
{% block content %}
		<div class="row">
			<div class="col-sm-12">

				<div class="card-box table-responsive">
					<h4 class="header-title m-t-0 m-b-30">Guests Today</h4>

					<table id="datatable" class="table table-striped table-bordered">
					<thead>
					<tr>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Time In</th>
						<th>Time Out</th>
						<th>Reason</th>
						<th>Time Out</th>
					</tr>
					</thead>

					<tbody>
					{% for g in guests %}
						<tr>
							<td>{{g.firstname}}</td>
							<td>{{g.lastname}}</td>
							<td>{{g.timein.strftime("%Y-%m-%d %H:%M")}}</td>
							<td>{{g.timeout.strftime("%Y-%m-%d %H:%M")}}</td>
							<td>{{g.reason}}</td>
							<td>
							<form action="{{url_for('guests_timeout', guest_id=g.id)}}" method="POST">
								<input type="submit" name="guests_timeout" value="guests_timeout">
							</form>
							<!-- <form action="{{url_for('guests_delete', guest_id=g.id)}}" method="POST">
								<input type="submit" name="delete_guest" value="delete_guest">
							</form> -->
							</td>
						</tr>
					{% endfor %}
					</tbody>
					</table>
				</div>


				<div class="card-box">
					<div class="row">
						<div class="col-lg-6">
							<h4 class="m-b-30 m-t-0 header-title"><b>New Guest</b></h4>
								<form class="form-group" method=post>
									  <dl>
									  	<input type="text" id="firstname" name="firstname" placeholder="Firstname">
									  	<input type="text" id="lastname" name="lastname" placeholder="Lastname">
									    <input type="datetime-local" id="timein" name="timein" value="{{date}}">
									    <input type="text" id="reason" name="reason" placeholder="reason">
									  </dl>
								  <p><input type=submit value=Add></p>
								</form>
						</div><!-- end col -->

					</div><!-- end row -->
				</div>
			</div><!-- end col -->
		</div>
{% endblock %}

{% block script %}
	<!-- XEditable Plugin -->
	<script src="static/plugins/moment/moment.js"></script>
	<script type="text/javascript" src="static/pages/jquery.xeditable.js"></script>

	<!-- Datatables-->
	<script src="static/plugins/datatables/jquery.dataTables.min.js"></script>
	<script src="static/plugins/datatables/dataTables.bootstrap.js"></script>
	<script src="static/plugins/datatables/dataTables.buttons.min.js"></script>
	<script src="static/plugins/datatables/buttons.bootstrap.min.js"></script>
	<script src="static/plugins/datatables/jszip.min.js"></script>
	<script src="static/plugins/datatables/pdfmake.min.js"></script>
	<script src="static/plugins/datatables/vfs_fonts.js"></script>
	<script src="static/plugins/datatables/buttons.html5.min.js"></script>
	<script src="static/plugins/datatables/buttons.print.min.js"></script>
	<script src="static/plugins/datatables/dataTables.fixedHeader.min.js"></script>
	<script src="static/plugins/datatables/dataTables.keyTable.min.js"></script>
	<script src="static/plugins/datatables/dataTables.responsive.min.js"></script>
	<script src="static/plugins/datatables/responsive.bootstrap.min.js"></script>
	<script src="static/plugins/datatables/dataTables.scroller.min.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
		    $('#datatable').dataTable();
		    $('#datatable-keytable').DataTable( { keys: true } );
		    $('#datatable-responsive').DataTable();
		    $('#datatable-scroller').DataTable( { ajax: "static/plugins/datatables/json/scroller-demo.json", deferRender: true, scrollY: 380, scrollCollapse: true, scroller: true } );
		    var table = $('#datatable-fixed-header').DataTable( { fixedHeader: true } );
		} );
		TableManageButtons.init();
	</script>
{% endblock %}